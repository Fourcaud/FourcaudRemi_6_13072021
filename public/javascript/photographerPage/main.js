(()=>{"use strict";let e=0,t=0,i=[],o="Popularité";function n(t){const o=parseInt(new URLSearchParams(window.location.search).get("id"));let n=document.getElementById("media"),l="",a=t.filter((e=>e.photographerId===o));i=a;for(let t in a){a[t].image?l+=`<article class="item"><img onclick="lightboxModal(${t})" class="item__photo"  \n      src="../photos/${a[t].photographerId}/${a[t].image}" alt="${a[t].title}" role="image link"/>`:l+=`<article class="item"><video onclick="lightboxModal(${t})" autoplay class="item__video modal-btn-lightbox " role="video link"> \n      <source src="../photos/${a[t].photographerId}/${a[t].video}"  type="video/mp4" ></video>`,l+='<div class="item__flex"><div class="item__name" role="text"><h2>'+a[t].title+"</h2></div>";const i=parseInt(a[t].likes);l+=`<div class="item__tagline" id="item__tagline" role="image" aria-hidden="true" title="Nombre de Like"><h3>${i}</h3><i id="${a[t].id}" onclick="modifyLike(${t})" class="far fa-heart"></i></div>`,e+=i,l+="</div></div>",l+="</article>",n.innerHTML=l}}function l(){let i=document.getElementById("like-prix"),o="";o+=`<div>${e}<i class="fas fa-heart"></i></div>`,o+=`<div>${t}€/jour</div>`,i.innerHTML=o}function a(){let e=document.getElementById("dropdown-id"),t="";t+=`<button onclick="myFunctionTri();" class="dropbtn">${o}<i class="fas fa-chevron-down"></i></button>`,t+='<div id="myDropdown" class="dropdown-content">',t+='<a onclick="filterByLike()">Popularité<i class="fas fa-chevron-up"></i></a>',t+='<div class="barFiltre"></div><a onclick="filterByName()">Titre</a><div class="barFiltre"></div>',t+='<a onclick="filterByDate()">Date</a>',t+="</div>",e.innerHTML=t}function r(){let e=[];e=i,e.sort(((e,t)=>t.likes-e.likes)),o="Popularité",a(),n(e)}var c;window.modifyLike=function(t){const{id:o}=i[t],n=document.getElementById(o);n.classList.toggle("fas"),n.classList.contains("fas")?(n.previousElementSibling.innerHTML++,e++,l()):(n.previousElementSibling.innerHTML--,e--,l())},window.myFunctionTri=function(){document.getElementById("myDropdown").classList.toggle("show")},window.onclick=function(e){if(!e.target.matches(".dropbtn")){let e,t=document.getElementsByClassName("dropdown-content");for(e=0;e<t.length;e++){let i=t[e];i.classList.contains("show")&&i.classList.remove("show")}}},window.filterByLike=r,window.filterByDate=function(){let e=[];e=i,e.sort(((e,t)=>new Date(t.date)-new Date(e.date))),o="Date",a(),n(e)},window.filterByName=function(){let e=[];e=i,e.sort(((e,t)=>e.title.localeCompare(t.title))),o="Titre",a(),n(e)},c=(e,o)=>{n(o),function(e){const i=parseInt(new URLSearchParams(window.location.search).get("id"));let o=document.getElementById("photographers"),n="";const l=e.find((e=>e.id===i));n+='<div class="bloc-1"><div class="bloc-1__flex">',n+='<div class="bloc-1__name"  role="header"><h2>'+l.name+"</h2></div>",n+='<div class="bloc-1__country" role="text"><h3>'+l.country+", "+l.city+"</h3><h4>"+l.tagline+"</h4></div>",t=l.price,n+='<div class="bloc-1__tags " role="links">';for(let e in l.tags)n+='<h6 class="labeltags">#'+l.tags[e]+"</h6>";n+="</div></div>",n+='<button class="bloc-1__btn btn-signup modal-btn" role="buttons">Contactez-moi</button></div>',n+=`<img class="bloc-1__portrait" src="../photos/PhotographersIDPhotos/${l.portrait}" alt="${l.name}" role="image"/>`,o.innerHTML=n;let a=document.getElementById("nameHeader"),r="";r+=`<p> Contactez-Moi <br>${l.name} </p>`,a.innerHTML=r}(e),l(),function(){const e=document.querySelector(".bground"),t=document.querySelectorAll(".modal-btn")[0],i=(document.querySelectorAll(".formData"),document.querySelectorAll(".close")),o=document.getElementById("first"),n=document.getElementById("last"),l=document.getElementById("email");function a(){e.style.display="none"}function r(e,t){let i;i=NodeList.prototype.isPrototypeOf(e)?e[0].parentNode:e.parentNode,i.setAttribute("data-error-visible",!0),i.setAttribute("data-error",t)}document.getElementById("reserve-form").addEventListener("submit",(function(e){e.preventDefault();let t=!0;(function(){let e=document.querySelectorAll('.formData[data-error-visible="true"]');for(let t of e)t.setAttribute("data-error-visible",!1),t.setAttribute("data-error","")})(),function(){let e=o.value;return null!==e&&e.length>=2}()||(t=!1,r(o,"Veuillez entrer un prénom comportant 2 caractères ou plus.")),function(){let e=n.value;return null!==e&&e.length>=2}()||(t=!1,r(n,"Veuillez entrer un nom comportant 2 caractères ou plus.")),/^([a-z0-9_\.-]+\@[\da-z\.-]+\.[a-z\.]{2,6})$/.test(l.value)||(t=!1,r(l,"Veuillez entrer une adresse email valide.")),t&&validateModal()})),t.addEventListener("click",(function(){e.style.display="block"})),i.forEach((e=>e.addEventListener("click",a)))}(),function(e){const t=document.querySelector(".bground-lightbox");function i(){t.style.display="none"}function o(t){const i=document.getElementById("modal-body-lightbox");document.querySelector(".bground-lightbox").style.display="block";let o="";e[t].image?o+=`<article class="item-lightbox" id="item-lightbox" data-id="${t}" ><div class="item-lightbox__flex"><i class="fas fa-chevron-left" onclick="changeMediaLeft(${t})" ></i><img id="${e[t].id}" class="item-lightbox__photo" src="../photos/${e[t].photographerId}/${e[t].image}" alt="${e[t].title}" /><i class="fas fa-chevron-right" onclick="changeMediaRight(${t})" ></i></div>`:o+=`<article class="item-lightbox" id="item-lightbox" data-id="${t}"><div class="item-lightbox__flex"><i class="fas fa-chevron-left" onclick="changeMediaLeft(${t})" ></i><video id="${e[t].id}" autoplay class="item-lightbox__video"><source src="../photos/${e[t].photographerId}/${e[t].video}" alt="${e[t].title}"  type="video/mp4" ></video><i class="fas fa-chevron-right" onclick="changeMediaRight(${t})" ></i></div>`,o+=`<div class="item-lightbox__titreMedia">${e[t].title}</div>`,o+="</article>",i.innerHTML=o}function n(e){let t=document.getElementById("item-lightbox").getAttribute("data-id");"ArrowLeft"===e.key?l(t):"ArrowRight"===e.key?a(t):"Escape"===e.key&&i()}function l(e){o(--e)}function a(e){o(++e)}document.querySelectorAll(".close-lightbox").forEach((e=>e.addEventListener("click",i))),window.lightboxModal=o,document.addEventListener("keydown",n),window.touchedown=n,window.changeMediaLeft=l,window.changeMediaRight=a}(i),a(),r()},fetch("../FishEyeData.json").then((e=>e.json())).then((e=>{c(e.photographers,e.media)}))})();